# 데이터베이스 설계

1. 고려사항
    - 무결성
    - 일관성
    - 회복
    - 보안
    - 효율성
    - DB확장

2. **순서**

    1. 요구 조건 분석
    2. 개념적 설계 (정보 모델링, 개념화)
        - 독립적인 개념 스키마 모델링, 트랜잭션 모델링
        - E-R 다이어그램 모델
    3. 논리적 설계 (데이터 모델링)
        - 목표 DBMS에 맞는 (종속적인) 논리 스키마 설계
        - 트랜잭션 인터페이스 설계, 테이블 설계
        - 논리적 DB 구조로 매핑, 스키마의 평가 및 정제
    4. 물리적 설계 (데이터 구조화)
        - 목표 DBMS에 맞는 물리적 구조의 데이터로 변환
        - 저장 레코드, 접근 경로 설계
    5. 구현
        - 목표 DBMS의 DDL(데이터 정의어)로 DB 생성, 트랜잭션 작성


# 데이터 모델

1. 구성 요소
    - 개체 Entity : DB에 표현하려는 것으로 사람이 생각하는 개념이나 정보 단위 같은 현실 세계의 대상체
    - 속성 Attribute : 데이터의 가장 작은 논리적 단위로서 파일 구조상의 데이터 항목 또는 데이터 필드에 해당
    - 관계 Relationship : 개체 간의 관계 

2. 개념적 데이터 모델
    - 현실 세계에 대한 인식을 추상적 개념으로 표현하는 과정
    - E-R(Entity-Relation) 모델

3. 논리적 데이터 모델
    - 개념적 모델링 과정에서 얻은 개념적 구조를 컴퓨터가 이해하고 처리할 수 있는 컴퓨터 세계의 환경에 맞도록 변환하는 과정
    - 단순히 데이터 모델이라고 하면 논리적 데이터 모델을 의미
    - 관계 모델, 계층 모델, 네트워크 모델

4. 데이터 모델에 표시할 요소
    - 구조 : 논리적인 개체 타입들 간의 관계, 데이터 구조 및 정적 성질 표현
    - 연산 : 실제 데이터를 처리하는 작업에 대한 명세로 조작하는 기본 도구
    - 제약 조건 : DB에 저장될 수 있는 실제 데이터의 논리적인 제약 조건


# 개체 Entity

1. 정의 및 특징

    - 독립적으로 존재하는 유형, 무형의 정보로 서로 연관된 몇 개의 속성으로 구성됨
    - DB에 표현하려는 것으로 사람이 생각하는 개념이나 정보 단위 같은 현실 세계의 대상체
    - 독립적으로 존재하거나 그 자체로서도 구별 가능
    - 유일한 식별자에 의해 식별 가능

2. 개체 선정 방법
    - 담당자와 인터뷰
    - 장부와 전표 이용
    - 자료 흐름도 (DFD) 통해 자료 저장소 (Data Store) 이용
    - BPR (Business Process Reengineering, 업무 프로세스 재설계) 에 의해 업무를 재정의한 경우 관련 개체를 찾음

3. 개체명 지정 방법
    - 해당 업무에서 사용하는 언어
    - 약어 사용 제한
    - 단수 명사 사용
    - 유일한 개체명


# 속성 Attribute

1. 정의 및 특징
    - DB를 구성하는 가장 작은 논리적 단위
    - 파일 구조상의 데이터 항목 또는 데이터 필드
    - 개체를 구성하는 항목 및 개체의 특성 기술
    - 속성의 수를 디그리 또는 차수라고 함
    - 튜플의 수는 카디널리티 Cardinality


# 관계 Relationship

1. 형태
    - 일대일
    - 일대다
        - A 원소는 B의 여러 개와 대응, B는 A 원소 한 개와 대응
    - 다대다
        - A 원소는 B의 여러 개와 대응, B도 여러 개의 A와 대응


# 식별자 Identifier

- 하나의 개체 내에서 각각의 인스턴스를 유일하게 구분할 수 있는 구분자
- 모든 개체는 한 개 이상의 식별자를 반드시 가짐

1. 주 식별자
    - 개체를 대표하는 유일한 식별자
    - 하나의 개체에 한 개만 존재

2. 보조 식별자
    - 주 식별자를 대신해 개체를 식별할 수 있는 속성
    - 하나의 개체에 하나 이상 존재

3. 내부 식별자
    - 개체 내에서 스스로 만들어지는 식별자

4. 외부 식별자
    - 다른 개체와의 관계에 의해 외부 개체의 식별자를 가져와 사용
    - 자신의 개체에서 다른 개체를 찾아가는 연결자 역할

5. 단일 식별자
    - 주 식별자가 하나의 속성으로 구성

6. 복합 식별자
    - 주 식별자가 두 개 이상의 속성으로 구성

7. 원조 식별자
    - 가공되지 않은 원래의 식별자

8. 대리 식별자
    - 주 식별자의 속성이 두 개 이상인 경우 속성들을 하나의 속성으로 묶어 사용 (**인조 식별자**)


# E-R 모델

Entity-Relationship 모델

- 개념적 데이터 모델의 가장 대표적인 것
- E-R 다이어그램으로 1:1, 1:N, N:N 등의 관계 모형을 제한 없이 나타냄

1. 피터 첸 표기법

2. 정보 공학 표기법 (크로우즈 핏)
    - | : 필수
    - O : 선택적
    - < : 다중
    - 실선 : 1개, 까마귀 발 : N개
    - 원형 : 관계가 있을수도 없을수도

3. 바커 표기법


# 관계형 데이터 모델

- 표를 이용한 DB 구조
- 기본 키와 외래 키로 데이터 간 관계 표현
- SQL, 1:1, 1:N, N:N 관계 자유롭게 표현

1. 관계형 데이터 베이스의 Relation 구조

    - 튜플, 행, 레코드
        - 속성의 모임
        - 파일 구조상 레코드와 같은 의미
        - **튜플의 수 = 카디널리티** 또는 기수, 대응수

    - 속성, 열, 필드
        - DB를 구성하는 가장 작은 논리적 단위
        - 데이터 항목 또는 데이터 필드
        - 개체의 특성 기술
        - **속성의 수 = 디그리 또는 차수**

    - 도메인
        - 하나의 속성이 가질 수 있는 타입 원자값들의 집합
        - 예를 들어 성별 속성의 도메인은 '남', '여'로 그 외의 값은 입력될 수 없음

2. 릴레이션 특징

    - 한 릴레이션에 포함된 튜플들은 모두 다른 값을 가짐
    - 한 릴레이션에 포함된 튜플 사이에는 순서가 없음
    - 릴레이션 스키마를 구성하는 어트리뷰트 간의 순서는 중요하지 않음
    - 어트리뷰트는 더이상 쪼갤 수 없는 원자 값으로 저장
    - 각 어트리뷰트는 식별을 위해 유일한 이름을 가짐. 그러나 도메인에는 동일한 값이 있을 수 있음.


# 키 Key

DB에서 튜플들을 서로 구분할 수 있는 기준이 되는 속성

1. **후보키 Candidate Key**
    - 릴레이션에 있는 모든 튜플에 대해 **유일성과 최소성**을 만족시켜야 함
    - 튜플을 유일하게 식별하기 위해 사용하는 속성들의 부분집합
    - 모든 릴레이션에는 반드시 하나 이상의 후보키가 존재

2. 기본키 Primary Key
    - 후보키에서 선정된 주키로 중복된 값과 NULL 값을 가질 수 없음
    - 유일성과 최소성을 가지모 튜플을 식별하기 위해 반드시 필요

3. 대체키 Alternate Key
    - 후보키가 둘 이상일 때 기본키를 제외한 나머지 후보 키

4. 슈퍼키 Super Key
    - 한 릴레이션에 있는 속성들의 집합으로 구성된 키
    - 모든 튜플에 대해 유일성은 만족시키지만 **최소성은 만족X**

5. 외래키 Foreign Key
    - 다른 릴레이션의 **기본키를 참조**하는 속성 또는 속성들의 집합
    - 참조되는 릴레이션의 기본키와 대응되어 릴레이션 간의 참조 관계 표현


# 무결성 Integrity

DB에 저장된 데이터 값과 그것이 표현하는 현실 세계의 값이 일치하는 정확성을 의미

1. 개체 무결성 Entity Integrity 실체 무결성
    - 기본키의 속성 값이 NULL이 아닌 원자 값을 갖는 성질

2. 도메인 무결성
    - 각 속성의 도메인에 지정된 값 만을 가져야 함

3. 참조 무결성
    - 외래키 값은 NULL이거나 참조 릴레이션의 기본키 값과 동일
    - 릴레이션은 참조할 수 없는 외래키 값을 가질 수 없다는 규정

4. 사용자 정의 무결성

5. 데이터 무결성 강화
    - 어플리케이션 데이터 생성, 수정, 삭제 시 무결성 조건을 검증하는 코드를 데이터를 조작하는 프로그램 내에 추가
    - 데이터베이스 트리거


# 관계 대수 및 관계 해석

1. **관계 대수**

    - 관계형 데이터베이스에서 원하는 정보와 그 정보를 검색하기 위해서 **어떻게 유도하는가**를 기술하는 **절차적인 언어**

    - Select : 조건을 만족하는 튜플들의 부분 집합 (수평 연산)
    - Project : 속성들의 부분 집합, 중복은 제거됨 (수직 연산)
    - Join : 공통으로 가지고 있는 속성을 이용하여 두 개의 릴레이션을 하나로 합쳐서 새로운 릴레이션 만드는 연산
    - Division : 도메인 값과 일치하는 R릴레이션의 튜플들을 찾아내는 연산

2. 관계 해석

    - 원하는 정보가 **무엇**이라는 것만 정의하는 **비절차적 특성**
    - 튜플 관계 해석, 도메인 관계 해석
    - 관계 대수로 표현한 식은 관계 해석으로 표현할 수 있음

    - 정량자
        - 전칭 정량자 : 모든 가능한 튜플, All의 A를 뒤집은 형태
        - 존재 정량자 : 어떤 튜플 하나라도 존재, Exists의 E를 뒤집은 형태


# 정규화, 반정규화

하나의 종속성이 하나의 릴레이션에 표현될 수 있도록 분해해가는 과정
데이터베이스의 논리적 설계 단계에서 수행

1. 정규화 목적
    - 데이터 구조의 안정성 및 무결성 유지
    - 데이터베이스 내에서 표현 가능하게 만듦
    - 효과적인 검색 알고리즘 생성
    - 중복을 배제해 이상(Anomaly)의 발생 방지 및 자료 저장 공간 최소화
    - 데이터 삽입 시 릴레이션을 재구성할 필요성을 줄임

2. 이상 Anomaly 의 개념 및 종류
    - 정규화를 거치지 않아 데이터베이스 내에 데이터들이 불필요하게 중복되어 릴레이션 조작 시 예기치 못하게 발생하는 곤란한 현상

    - 삽입 이상
    - 삭제 이상
    - 갱신 이상

3. 정규화의 원칙
    - 정보의 무손실
    - 분리의 원칙
    - 데이터 중복성 감소

4. **정규화 과정**

    - 제1정규형
        - 릴레이션에 속한 모든 도메인이 원자 값만으로 되어 있는 정규형
    - 제2정규형
        - 완전 함수적 종속을 만족하는, **부분적 함수 종속을 제거**한 정규형
    - 제3정규형
        - 이행적 함수 종속 관계를 만족하지 않는 정규형
        - A->B, B->C 일때 A->C를 만족하는 관계 (**이행규칙**)
    - BCNF
        - 모든 결정자가 후보키인 정규형
    - 제4정규형
        - 다치 종속이 성립하는 경우
        - R의 모든 속성이 A에 함수적 종속 관계를 만족하는 정규형
    - 제5정규형
        - 모든 조인 종속이 R의 후보키를 통해서만 성립되는 정규형

5. 반정규화 개념
    - 시스템 성능 향상, 개발 및 운영 편의성을 위해 정규화된 데이터 모델을 통합, 중복, 분리하는 과정으로 **의도적으로 정규화 원칙을 위배하는 행위**

6. 반정규화 방법
    - 테이블 통합
    - 테이블 분할
    - 중복 테이블 추가
        - **집계 테이블, 진행 테이블, 특정 부분만을 포함하는 테이블**
    - 중복 속성 추가


